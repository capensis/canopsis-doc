

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Alarm management &mdash; Canopsis 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Canopsis 1.0 documentation" href="../../../index.html"/>
        <link rel="up" title="Canopsis Technical Requirements" href="index.html"/>
        <link rel="next" title="Serie" href="tr__serie.html"/>
        <link rel="prev" title="Monitoring" href="tr__monitoring.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> Canopsis
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Canopsis</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html">Sakura</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#canopsis-specification">Canopsis Specification</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../FR/index.html">Canopsis Functionnal Requirements</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Canopsis Technical Requirements</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="tr__architecture.html">Canopsis Technical Architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="tr__context.html">Context</a></li>
<li class="toctree-l4"><a class="reference internal" href="tr__metric.html">Metrology</a></li>
<li class="toctree-l4"><a class="reference internal" href="tr__mail_output.html">Mail Output Media</a></li>
<li class="toctree-l4"><a class="reference internal" href="tr__graph-backend.html">Graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="tr__topology-backend.html">Topology</a></li>
<li class="toctree-l4"><a class="reference internal" href="tr__topology-frontend.html">Topology frontend</a></li>
<li class="toctree-l4"><a class="reference internal" href="tr__monitoring.html">Monitoring</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Alarm management</a></li>
<li class="toctree-l4"><a class="reference internal" href="tr__serie.html">Serie</a></li>
<li class="toctree-l4"><a class="reference internal" href="tr__statistics.html">Canopsis Statistics Generator</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ED/index.html">Canopsis Exploitation Documents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../canopsis-connectors/index.html">Canopsis Connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../canopsis-ui-bricks/index.html">Canopsis Ui Bricks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cat/index.html">Cat</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">Canopsis</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../index.html">Canopsis</a> &raquo;</li>
      
          <li><a href="../index.html">Sakura</a> &raquo;</li>
      
          <li><a href="index.html">Canopsis Technical Requirements</a> &raquo;</li>
      
    <li>Alarm management</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/canopsis/canopsis/TR/tr__alarm.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="alarm-management">
<span id="tr-alarm"></span><h1><a class="toc-backref" href="#id2">Alarm management</a><a class="headerlink" href="#alarm-management" title="Permalink to this headline">¶</a></h1>
<p>This document specifies the alarm management in Canopsis, and its implementation.</p>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#alarm-management" id="id2">Alarm management</a><ul>
<li><a class="reference internal" href="#references" id="id3">References</a></li>
<li><a class="reference internal" href="#updates" id="id4">Updates</a></li>
<li><a class="reference internal" href="#id1" id="id5">Contents</a><ul>
<li><a class="reference internal" href="#alerts-manager" id="id6">Alerts manager</a></li>
<li><a class="reference internal" href="#alarm-cycle" id="id7">Alarm Cycle</a></li>
<li><a class="reference internal" href="#alarm-data-model" id="id8">Alarm data model</a></li>
</ul>
</li>
<li><a class="reference internal" href="#unit-tests" id="id9">Unit Tests</a><ul>
<li><a class="reference internal" href="#get-alarm-history" id="id10">Get alarm history</a></li>
<li><a class="reference internal" href="#creating-new-alarm" id="id11">Creating new alarm</a></li>
<li><a class="reference internal" href="#get-last-unresolved-alarm" id="id12">Get last unresolved alarm</a></li>
<li><a class="reference internal" href="#update-existing-alarm" id="id13">Update existing alarm</a></li>
<li><a class="reference internal" href="#task-acknowledge" id="id14">Task: acknowledge</a></li>
<li><a class="reference internal" href="#task-unacknowledge" id="id15">Task: unacknowledge</a></li>
<li><a class="reference internal" href="#task-cancel" id="id16">Task: Cancel</a></li>
<li><a class="reference internal" href="#task-restore" id="id17">Task: Restore</a></li>
<li><a class="reference internal" href="#task-declare-ticket" id="id18">Task: Declare ticket</a></li>
<li><a class="reference internal" href="#task-associate-ticket" id="id19">Task: Associate ticket</a></li>
<li><a class="reference internal" href="#task-change-state" id="id20">Task: Change State</a></li>
<li><a class="reference internal" href="#task-state-increase" id="id21">Task: State increase</a></li>
<li><a class="reference internal" href="#task-state-decrease" id="id22">Task: State decrease</a></li>
<li><a class="reference internal" href="#task-status-increase" id="id23">Task: Status increase</a></li>
<li><a class="reference internal" href="#task-status-deccrease" id="id24">Task: Status deccrease</a></li>
<li><a class="reference internal" href="#utility-get-previous-step" id="id25">Utility: Get previous step</a></li>
<li><a class="reference internal" href="#utility-get-last-state" id="id26">Utility: Get last state</a></li>
<li><a class="reference internal" href="#utility-get-last-status" id="id27">Utility: Get last status</a></li>
<li><a class="reference internal" href="#utility-is-flapping" id="id28">Utility: Is flapping ?</a></li>
<li><a class="reference internal" href="#utility-is-stealthy" id="id29">Utility: Is stealthy ?</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="references">
<h2><a class="toc-backref" href="#id3">References</a><a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="../FR/fr__alarm.html#fr-alarm"><span class="std std-ref">FR::Alarm</span></a></li>
<li><a class="reference internal" href="../FR/fr__configurable.html#fr-configurable"><span class="std std-ref">FR::Configuration</span></a></li>
<li><a class="reference internal" href="../FR/fr__event.html#fr-event"><span class="std std-ref">FR::Event</span></a></li>
<li><a class="reference internal" href="../FR/fr__storage.html#fr-storage"><span class="std std-ref">FR::Storage</span></a></li>
<li><span class="xref std std-ref">TR::Storage</span></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="updates">
<h2><a class="toc-backref" href="#id4">Updates</a><a class="headerlink" href="#updates" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Author(s)</th>
<th class="head">Date</th>
<th class="head">Version</th>
<th class="head">Summary</th>
<th class="head">Accepted by</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>David Delassus</td>
<td>2015/10/26</td>
<td>0.1</td>
<td>Document creation</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id1">
<h2><a class="toc-backref" href="#id5">Contents</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<div class="section" id="alerts-manager">
<span id="tr-alarm-manager"></span><h3><a class="toc-backref" href="#id6">Alerts manager</a><a class="headerlink" href="#alerts-manager" title="Permalink to this headline">¶</a></h3>
<p>An <code class="docutils literal"><span class="pre">Alerts</span></code> <a class="reference internal" href="../FR/fr__configurable.html#fr-configurable"><span class="std std-ref">configurable</span></a> provides:</p>
<blockquote>
<div><ul>
<li><p class="first">the ability to archive an <a class="reference internal" href="../FR/fr__event.html#fr-event"><span class="std std-ref">event</span></a></p>
</li>
<li><dl class="first docutils">
<dt>alarm cycle management operations:</dt>
<dd><ul class="first last simple">
<li>create a new one</li>
<li>update existing one</li>
<li>get last one</li>
<li>find old alarms</li>
<li>tagging</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="alarm-cycle">
<span id="tr-alarm-cycle"></span><h3><a class="toc-backref" href="#id7">Alarm Cycle</a><a class="headerlink" href="#alarm-cycle" title="Permalink to this headline">¶</a></h3>
<p>Alarm cycles are persisted in a <span class="xref std std-ref">timed storage</span> with the following informations:</p>
<blockquote>
<div><ul class="simple">
<li>data identifier: the entity identifier of the received event</li>
<li>value: set of alarm steps (see <a class="reference internal" href="#tr-alarm-datamodel"><span class="std std-ref">data model</span></a> bellow)</li>
<li>timestamp: date/time of alarm appearance</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="alarm-data-model">
<span id="tr-alarm-datamodel"></span><h3><a class="toc-backref" href="#id8">Alarm data model</a><a class="headerlink" href="#alarm-data-model" title="Permalink to this headline">¶</a></h3>
<p>The set of alarm steps will compute informations for an easier use:</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>state</td>
<td><code class="docutils literal"><span class="pre">stateinc</span></code> step or <code class="docutils literal"><span class="pre">statedec</span></code> step or <code class="docutils literal"><span class="pre">changestate</span></code> step or <code class="docutils literal"><span class="pre">None</span></code></td>
</tr>
<tr class="row-odd"><td>status</td>
<td><code class="docutils literal"><span class="pre">statusinc</span></code> step or <code class="docutils literal"><span class="pre">statusdec</span></code> step or <code class="docutils literal"><span class="pre">None</span></code></td>
</tr>
<tr class="row-even"><td>ack</td>
<td><code class="docutils literal"><span class="pre">ack</span></code> step or <code class="docutils literal"><span class="pre">None</span></code> if unacknowledged</td>
</tr>
<tr class="row-odd"><td>canceled</td>
<td><code class="docutils literal"><span class="pre">cancel</span></code> step or <code class="docutils literal"><span class="pre">None</span></code> if uncanceled</td>
</tr>
<tr class="row-even"><td>ticket</td>
<td><code class="docutils literal"><span class="pre">declareticket</span></code> step or <code class="docutils literal"><span class="pre">assocticket</span></code> step or <code class="docutils literal"><span class="pre">None</span></code> if no ticketing informations</td>
</tr>
<tr class="row-odd"><td>resolved</td>
<td>timestamp of resolution or <code class="docutils literal"><span class="pre">None</span></code> if alarm is still on going</td>
</tr>
<tr class="row-even"><td>steps</td>
<td>array of steps (see data models bellow)</td>
</tr>
<tr class="row-odd"><td>tags</td>
<td>array of tag (as strings) used for filtering</td>
</tr>
</tbody>
</table>
<div class="section" id="alarm-step-state-increase-data-model">
<span id="tr-alarm-datamodel-stateinc"></span><h4>Alarm step &#8220;state increase&#8221; data model<a class="headerlink" href="#alarm-step-state-increase-data-model" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Description</th>
<th class="head">Default Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>_t</td>
<td>step type</td>
<td><code class="docutils literal"><span class="pre">stateinc</span></code></td>
</tr>
<tr class="row-odd"><td>t</td>
<td>step timestamp</td>
<td><code class="docutils literal"><span class="pre">event[&quot;timestamp&quot;]</span></code></td>
</tr>
<tr class="row-even"><td>a</td>
<td>step author</td>
<td><code class="docutils literal"><span class="pre">{connector}.{connector_name}</span></code></td>
</tr>
<tr class="row-odd"><td>m</td>
<td>step message</td>
<td><code class="docutils literal"><span class="pre">event[&quot;output&quot;]</span></code></td>
</tr>
<tr class="row-even"><td>val</td>
<td>step associated value</td>
<td>new state</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="alarm-step-state-decrease-data-model">
<span id="tr-alarm-datamodel-statedec"></span><h4>Alarm step &#8220;state decrease&#8221; data model<a class="headerlink" href="#alarm-step-state-decrease-data-model" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Description</th>
<th class="head">Default Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>_t</td>
<td>step type</td>
<td><code class="docutils literal"><span class="pre">statedec</span></code></td>
</tr>
<tr class="row-odd"><td>t</td>
<td>step timestamp</td>
<td><code class="docutils literal"><span class="pre">event[&quot;timestamp&quot;]</span></code></td>
</tr>
<tr class="row-even"><td>a</td>
<td>step author</td>
<td><code class="docutils literal"><span class="pre">{connector}.{connector_name}</span></code></td>
</tr>
<tr class="row-odd"><td>m</td>
<td>step message</td>
<td><code class="docutils literal"><span class="pre">event[&quot;output&quot;]</span></code></td>
</tr>
<tr class="row-even"><td>val</td>
<td>step associated value</td>
<td>new state</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="alarm-step-status-increase-data-model">
<span id="tr-alarm-datamodel-statusinc"></span><h4>Alarm step &#8220;status increase&#8221; data model<a class="headerlink" href="#alarm-step-status-increase-data-model" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Description</th>
<th class="head">Default Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>_t</td>
<td>step type</td>
<td><code class="docutils literal"><span class="pre">statusinc</span></code></td>
</tr>
<tr class="row-odd"><td>t</td>
<td>step timestamp</td>
<td><code class="docutils literal"><span class="pre">event[&quot;timestamp&quot;]</span></code></td>
</tr>
<tr class="row-even"><td>a</td>
<td>step author</td>
<td><code class="docutils literal"><span class="pre">{connector}.{connector_name}</span></code></td>
</tr>
<tr class="row-odd"><td>m</td>
<td>step message</td>
<td><code class="docutils literal"><span class="pre">event[&quot;output&quot;]</span></code></td>
</tr>
<tr class="row-even"><td>val</td>
<td>step associated value</td>
<td>new status</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="alarm-step-status-decrease-data-model">
<span id="tr-alarm-datamodel-statusdec"></span><h4>Alarm step &#8220;status decrease&#8221; data model<a class="headerlink" href="#alarm-step-status-decrease-data-model" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Description</th>
<th class="head">Default Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>_t</td>
<td>step type</td>
<td><code class="docutils literal"><span class="pre">statusdec</span></code></td>
</tr>
<tr class="row-odd"><td>t</td>
<td>step timestamp</td>
<td><code class="docutils literal"><span class="pre">event[&quot;timestamp&quot;]</span></code></td>
</tr>
<tr class="row-even"><td>a</td>
<td>step author</td>
<td><code class="docutils literal"><span class="pre">{connector}.{connector_name}</span></code></td>
</tr>
<tr class="row-odd"><td>m</td>
<td>step message</td>
<td><code class="docutils literal"><span class="pre">event[&quot;output&quot;]</span></code></td>
</tr>
<tr class="row-even"><td>val</td>
<td>step associated value</td>
<td>new status</td>
</tr>
</tbody>
</table>
<p><strong>NB:</strong> if status decreases to <code class="docutils literal"><span class="pre">OFF</span></code>, then the alarm value <code class="docutils literal"><span class="pre">resolved</span></code> is set to this step timestamp.</p>
</div>
<div class="section" id="alarm-step-acknowledge-data-model">
<span id="tr-alarm-datamodel-acknowledge"></span><h4>Alarm step &#8220;acknowledge&#8221; data model<a class="headerlink" href="#alarm-step-acknowledge-data-model" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Description</th>
<th class="head">Default Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>_t</td>
<td>step type</td>
<td><code class="docutils literal"><span class="pre">ack</span></code></td>
</tr>
<tr class="row-odd"><td>t</td>
<td>step timestamp</td>
<td><code class="docutils literal"><span class="pre">event[&quot;timestamp&quot;]</span></code></td>
</tr>
<tr class="row-even"><td>a</td>
<td>step author</td>
<td>acknowledgment author</td>
</tr>
<tr class="row-odd"><td>m</td>
<td>step message</td>
<td>acknowledgment message</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="alarm-step-unacknowledge-data-model">
<span id="tr-alarm-datamodel-unacknowledge"></span><h4>Alarm step &#8220;unacknowledge&#8221; data model<a class="headerlink" href="#alarm-step-unacknowledge-data-model" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Description</th>
<th class="head">Default Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>_t</td>
<td>step type</td>
<td><code class="docutils literal"><span class="pre">ackremove</span></code></td>
</tr>
<tr class="row-odd"><td>t</td>
<td>step timestamp</td>
<td><code class="docutils literal"><span class="pre">event[&quot;timestamp&quot;]</span></code></td>
</tr>
<tr class="row-even"><td>a</td>
<td>step author</td>
<td>acknowledgment removal author</td>
</tr>
<tr class="row-odd"><td>m</td>
<td>step message</td>
<td>acknowledgment removal message</td>
</tr>
</tbody>
</table>
<p><strong>NB:</strong> this step reset the alarm value <code class="docutils literal"><span class="pre">ack</span></code> to <code class="docutils literal"><span class="pre">None</span></code>.</p>
</div>
<div class="section" id="alarm-step-cancel-data-model">
<span id="tr-alarm-datamodel-cancel"></span><h4>Alarm step &#8220;cancel&#8221; data model<a class="headerlink" href="#alarm-step-cancel-data-model" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Description</th>
<th class="head">Default Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>_t</td>
<td>step type</td>
<td><code class="docutils literal"><span class="pre">cancel</span></code></td>
</tr>
<tr class="row-odd"><td>t</td>
<td>step timestamp</td>
<td><code class="docutils literal"><span class="pre">event[&quot;timestamp&quot;]</span></code></td>
</tr>
<tr class="row-even"><td>a</td>
<td>step author</td>
<td>alarm canceling author</td>
</tr>
<tr class="row-odd"><td>m</td>
<td>step message</td>
<td>alarm canceling message</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="alarm-step-restore-data-model">
<span id="tr-alarm-datamodel-restore"></span><h4>Alarm step &#8220;restore&#8221; data model<a class="headerlink" href="#alarm-step-restore-data-model" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Description</th>
<th class="head">Default Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>_t</td>
<td>step type</td>
<td><code class="docutils literal"><span class="pre">uncancel</span></code></td>
</tr>
<tr class="row-odd"><td>t</td>
<td>step timestamp</td>
<td><code class="docutils literal"><span class="pre">event[&quot;timestamp&quot;]</span></code></td>
</tr>
<tr class="row-even"><td>a</td>
<td>step author</td>
<td>alarm restoring author</td>
</tr>
<tr class="row-odd"><td>m</td>
<td>step message</td>
<td>alarm restoring message</td>
</tr>
</tbody>
</table>
<p><strong>NB:</strong> this step reset the alarm value <code class="docutils literal"><span class="pre">cancel</span></code> to <code class="docutils literal"><span class="pre">None</span></code>.</p>
</div>
<div class="section" id="alarm-step-declare-ticket-data-model">
<span id="tr-alarm-datamodel-declareticket"></span><h4>Alarm step &#8220;declare ticket&#8221; data model<a class="headerlink" href="#alarm-step-declare-ticket-data-model" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Description</th>
<th class="head">Default Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>_t</td>
<td>step type</td>
<td><code class="docutils literal"><span class="pre">declareticket</span></code></td>
</tr>
<tr class="row-odd"><td>t</td>
<td>step timestamp</td>
<td><code class="docutils literal"><span class="pre">event[&quot;timestamp&quot;]</span></code></td>
</tr>
<tr class="row-even"><td>a</td>
<td>step author</td>
<td>ticket declaration author</td>
</tr>
<tr class="row-odd"><td>m</td>
<td>step message</td>
<td>ticket declaration message</td>
</tr>
<tr class="row-even"><td>val</td>
<td>ticket number</td>
<td><code class="docutils literal"><span class="pre">None</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="alarm-step-associate-ticket-data-model">
<span id="tr-alarm-datamodel-assocticket"></span><h4>Alarm step &#8220;associate ticket&#8221; data model<a class="headerlink" href="#alarm-step-associate-ticket-data-model" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Description</th>
<th class="head">Default Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>_t</td>
<td>step type</td>
<td><code class="docutils literal"><span class="pre">assocticket</span></code></td>
</tr>
<tr class="row-odd"><td>t</td>
<td>step timestamp</td>
<td><code class="docutils literal"><span class="pre">event[&quot;timestamp&quot;]</span></code></td>
</tr>
<tr class="row-even"><td>a</td>
<td>step author</td>
<td>ticket association author</td>
</tr>
<tr class="row-odd"><td>m</td>
<td>step message</td>
<td>ticket association message</td>
</tr>
<tr class="row-even"><td>val</td>
<td>ticket number</td>
<td><code class="docutils literal"><span class="pre">event[&quot;ticket&quot;]</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="alarm-step-change-state-data-model">
<span id="tr-alarm-datamodel-changestate"></span><h4>Alarm step &#8220;change state&#8221; data model<a class="headerlink" href="#alarm-step-change-state-data-model" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Description</th>
<th class="head">Default Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>_t</td>
<td>step type</td>
<td><code class="docutils literal"><span class="pre">changestate</span></code></td>
</tr>
<tr class="row-odd"><td>t</td>
<td>step timestamp</td>
<td><code class="docutils literal"><span class="pre">event[&quot;timestamp&quot;]</span></code></td>
</tr>
<tr class="row-even"><td>a</td>
<td>step author</td>
<td>state requalification author</td>
</tr>
<tr class="row-odd"><td>m</td>
<td>step message</td>
<td>state requalification message</td>
</tr>
<tr class="row-even"><td>val</td>
<td>state</td>
<td>new state</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="unit-tests">
<h2><a class="toc-backref" href="#id9">Unit Tests</a><a class="headerlink" href="#unit-tests" title="Permalink to this headline">¶</a></h2>
<div class="section" id="get-alarm-history">
<h3><a class="toc-backref" href="#id10">Get alarm history</a><a class="headerlink" href="#get-alarm-history" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">get_alarms([resolved],</span> <span class="pre">[tags],</span> <span class="pre">[exclude_tags],</span> <span class="pre">[timewindow])</span> <span class="pre">-&gt;</span> <span class="pre">alarms</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">resolved</span></code> (optional) as a <code class="docutils literal"><span class="pre">boolean</span></code>: get resolved alarms or unresolved alarms</li>
<li><code class="docutils literal"><span class="pre">tags</span></code> (optional) as a <code class="docutils literal"><span class="pre">string</span></code> or a <code class="docutils literal"><span class="pre">list</span></code>: get alarms with listed tags</li>
<li><code class="docutils literal"><span class="pre">exclude_tags</span></code> (optional) as a <code class="docutils literal"><span class="pre">string</span></code> or a <code class="docutils literal"><span class="pre">list</span></code>: get alarms without listed tags</li>
<li><code class="docutils literal"><span class="pre">timewindow</span></code> (optional) as a <code class="docutils literal"><span class="pre">canopsis.timeserie.timewindow.TimeWindow</span></code>: get alarms within time interval</li>
<li><code class="docutils literal"><span class="pre">alarms</span></code> as a <code class="docutils literal"><span class="pre">cursor</span></code>: alarms that matched the previous parameters</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="creating-new-alarm">
<h3><a class="toc-backref" href="#id11">Creating new alarm</a><a class="headerlink" href="#creating-new-alarm" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">make_alarm(alarm_id,</span> <span class="pre">event)</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">alarm_id</span></code> as <code class="docutils literal"><span class="pre">string</span></code>: the entity id of the alarm</li>
<li><code class="docutils literal"><span class="pre">event</span></code> as <code class="docutils literal"><span class="pre">dict</span></code>: the event which produces the alarm</li>
</ul>
</div></blockquote>
<div class="section" id="case-1-new-alarm">
<h4>Case 1: new alarm<a class="headerlink" href="#case-1-new-alarm" title="Permalink to this headline">¶</a></h4>
<p><strong>Expected:</strong> The alarm <strong>MUST</strong> be present in the configured timed storage with all values set to <code class="docutils literal"><span class="pre">None</span></code>.</p>
</div>
<div class="section" id="case-2-existing-alarm">
<h4>Case 2: existing alarm<a class="headerlink" href="#case-2-existing-alarm" title="Permalink to this headline">¶</a></h4>
<p><strong>Expected:</strong> The existing alarm <strong>MUST</strong> be left untouched, and no new alarm should be created.</p>
</div>
</div>
<div class="section" id="get-last-unresolved-alarm">
<h3><a class="toc-backref" href="#id12">Get last unresolved alarm</a><a class="headerlink" href="#get-last-unresolved-alarm" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">get_current_alarm(alarm_id)</span> <span class="pre">-&gt;</span> <span class="pre">alarm</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">alarm_id</span></code> as <code class="docutils literal"><span class="pre">string</span></code>: the entity id of the alarm</li>
<li><code class="docutils literal"><span class="pre">alarm</span></code> as a <code class="docutils literal"><span class="pre">dict</span></code>: the current unresolved alarm, or <code class="docutils literal"><span class="pre">None</span></code> if no alarm found, or all of them are resolved</li>
</ul>
</div></blockquote>
<div class="section" id="case-1-there-is-an-unresolved-alarm">
<h4>Case 1: there is an unresolved alarm<a class="headerlink" href="#case-1-there-is-an-unresolved-alarm" title="Permalink to this headline">¶</a></h4>
<p><strong>Expected:</strong> <code class="docutils literal"><span class="pre">alarm</span></code> <strong>MUST NOT</strong> be <code class="docutils literal"><span class="pre">None</span></code>, and should contains a value described by the <a class="reference internal" href="#tr-alarm-datamodel"><span class="std std-ref">alarm data model</span></a>.</p>
</div>
<div class="section" id="case-2-there-is-no-alarm-or-no-resolved-ones">
<h4>Case 2: there is no alarm, or no resolved ones<a class="headerlink" href="#case-2-there-is-no-alarm-or-no-resolved-ones" title="Permalink to this headline">¶</a></h4>
<p><strong>Expected:</strong> <code class="docutils literal"><span class="pre">alarm</span></code> <strong>MUST</strong> be <code class="docutils literal"><span class="pre">None</span></code>.</p>
</div>
</div>
<div class="section" id="update-existing-alarm">
<h3><a class="toc-backref" href="#id13">Update existing alarm</a><a class="headerlink" href="#update-existing-alarm" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">update_current_alarm(alarm,</span> <span class="pre">new_value,</span> <span class="pre">[tags])</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">alarm</span></code> as described by the <span class="xref std std-ref">timed storage data model</span>: alarm to update</li>
<li><code class="docutils literal"><span class="pre">new_value</span></code> as described by the <a class="reference internal" href="#tr-alarm-datamodel"><span class="std std-ref">alarm data model</span></a>: value to use for the alarm</li>
<li><code class="docutils literal"><span class="pre">tags</span></code> (optional) as a <code class="docutils literal"><span class="pre">list</span></code> or a <code class="docutils literal"><span class="pre">string</span></code>: tags to add to the alarm value</li>
</ul>
</div></blockquote>
<div class="section" id="case-1-there-is-no-alarm">
<h4>Case 1: there is no alarm<a class="headerlink" href="#case-1-there-is-no-alarm" title="Permalink to this headline">¶</a></h4>
<p><strong>Expected:</strong> A new document <strong>SHOULD</strong> be created.</p>
</div>
<div class="section" id="case-2-there-is-an-existing-alarm">
<h4>Case 2: there is an existing alarm<a class="headerlink" href="#case-2-there-is-an-existing-alarm" title="Permalink to this headline">¶</a></h4>
<p><strong>Expected:</strong></p>
<blockquote>
<div><ul class="simple">
<li>the alarm value <strong>MUST</strong> be replaced by <code class="docutils literal"><span class="pre">new_value</span></code></li>
<li>the <code class="docutils literal"><span class="pre">tags</span></code> <strong>MUST</strong> be added to the alarm value</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="task-acknowledge">
<h3><a class="toc-backref" href="#id14">Task: acknowledge</a><a class="headerlink" href="#task-acknowledge" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">alerts.useraction.ack(manager,</span> <span class="pre">alarm,</span> <span class="pre">author,</span> <span class="pre">message,</span> <span class="pre">event)</span> <span class="pre">-&gt;</span> <span class="pre">new_value</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">manager</span></code> as an <code class="docutils literal"><span class="pre">Alerts</span></code> configurable: the task caller</li>
<li><code class="docutils literal"><span class="pre">alarm</span></code> as described by the <a class="reference internal" href="#tr-alarm-datamodel"><span class="std std-ref">alarm data model</span></a>: the alarm to acknowledge</li>
<li><code class="docutils literal"><span class="pre">author</span></code> as a <code class="docutils literal"><span class="pre">string</span></code>: the acknowledgment author</li>
<li><code class="docutils literal"><span class="pre">message</span></code> as a <code class="docutils literal"><span class="pre">string</span></code>: the acknowledgment message</li>
<li><code class="docutils literal"><span class="pre">event</span></code> as a <code class="docutils literal"><span class="pre">dict</span></code>: the <a class="reference internal" href="../FR/fr__event.html#fr-event-ack"><span class="std std-ref">acknowledgment event</span></a></li>
<li><code class="docutils literal"><span class="pre">new_value</span></code> as described by the <a class="reference internal" href="#tr-alarm-datamodel"><span class="std std-ref">alarm data model</span></a>: the new alarm value</li>
</ul>
</div></blockquote>
<p><strong>Expected:</strong></p>
<blockquote>
<div><ul class="simple">
<li>the alarm <code class="docutils literal"><span class="pre">ack</span></code> <strong>MUST</strong> be set to the <a class="reference internal" href="#tr-alarm-datamodel-acknowledge"><span class="std std-ref">acknowledge step</span></a></li>
<li>the step <strong>MUST</strong> be added to the <code class="docutils literal"><span class="pre">steps</span></code> set of the alarm</li>
<li>the alarm <strong>MUST</strong> be returned as <code class="docutils literal"><span class="pre">new_value</span></code></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="task-unacknowledge">
<h3><a class="toc-backref" href="#id15">Task: unacknowledge</a><a class="headerlink" href="#task-unacknowledge" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">alerts.useraction.ackremove(manager,</span> <span class="pre">alarm,</span> <span class="pre">author,</span> <span class="pre">message,</span> <span class="pre">event)</span> <span class="pre">-&gt;</span> <span class="pre">new_value</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">manager</span></code> as an <code class="docutils literal"><span class="pre">Alerts</span></code> configurable: the task caller</li>
<li><code class="docutils literal"><span class="pre">alarm</span></code> as described by the <a class="reference internal" href="#tr-alarm-datamodel"><span class="std std-ref">alarm data model</span></a>: the alarm to unacknowledge</li>
<li><code class="docutils literal"><span class="pre">author</span></code> as a <code class="docutils literal"><span class="pre">string</span></code>: the acknowledgment removing author</li>
<li><code class="docutils literal"><span class="pre">message</span></code> as a <code class="docutils literal"><span class="pre">string</span></code>: the acknowledgment removing message</li>
<li><code class="docutils literal"><span class="pre">event</span></code> as a <code class="docutils literal"><span class="pre">dict</span></code>: the <a class="reference internal" href="../FR/fr__event.html#fr-event-ackremove"><span class="std std-ref">acknowledgment removing event</span></a></li>
<li><code class="docutils literal"><span class="pre">new_value</span></code> as described by the <a class="reference internal" href="#tr-alarm-datamodel"><span class="std std-ref">alarm data model</span></a>: the new alarm value</li>
</ul>
</div></blockquote>
<p><strong>Expected:</strong></p>
<blockquote>
<div><ul class="simple">
<li>the alarm <code class="docutils literal"><span class="pre">ack</span></code> <strong>MUST</strong> be set to <code class="docutils literal"><span class="pre">None</span></code></li>
<li>the <a class="reference internal" href="#tr-alarm-datamodel-unacknowledge"><span class="std std-ref">unacknowledge step</span></a> <strong>MUST</strong> be added to the <code class="docutils literal"><span class="pre">steps</span></code> set of the alarm</li>
<li>the alarm <strong>MUST</strong> be returned as <code class="docutils literal"><span class="pre">new_value</span></code></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="task-cancel">
<h3><a class="toc-backref" href="#id16">Task: Cancel</a><a class="headerlink" href="#task-cancel" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">alerts.useraction.cancel(manager,</span> <span class="pre">alarm,</span> <span class="pre">author,</span> <span class="pre">message,</span> <span class="pre">event)</span> <span class="pre">-&gt;</span> <span class="pre">new_value,</span> <span class="pre">status</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">manager</span></code> as an <code class="docutils literal"><span class="pre">Alerts</span></code> configurable: the task caller</li>
<li><code class="docutils literal"><span class="pre">alarm</span></code> as described by the <a class="reference internal" href="#tr-alarm-datamodel"><span class="std std-ref">alarm data model</span></a>: the alarm to cancel</li>
<li><code class="docutils literal"><span class="pre">author</span></code> as a <code class="docutils literal"><span class="pre">string</span></code>: the alarm canceling author</li>
<li><code class="docutils literal"><span class="pre">message</span></code> as a <code class="docutils literal"><span class="pre">string</span></code>: the alarm canceling message</li>
<li><code class="docutils literal"><span class="pre">event</span></code> as a <code class="docutils literal"><span class="pre">dict</span></code>: the <a class="reference internal" href="../FR/fr__event.html#fr-event-cancel"><span class="std std-ref">alarm canceling event</span></a></li>
<li><code class="docutils literal"><span class="pre">new_value</span></code> as described by the <a class="reference internal" href="#tr-alarm-datamodel"><span class="std std-ref">alarm data model</span></a>: the new alarm value</li>
<li><code class="docutils literal"><span class="pre">status</span></code> as an <code class="docutils literal"><span class="pre">int</span></code> which will always be set to <code class="docutils literal"><span class="pre">CANCELED</span></code> (will trigger a change of status on the alarm)</li>
</ul>
</div></blockquote>
<p><strong>Expected:</strong></p>
<blockquote>
<div><ul class="simple">
<li>the alarm <code class="docutils literal"><span class="pre">cancel</span></code> <strong>MUST</strong> be set to <a class="reference internal" href="#tr-alarm-datamodel-cancel"><span class="std std-ref">cancel step</span></a></li>
<li>the step <strong>MUST</strong> be added to the <code class="docutils literal"><span class="pre">steps</span></code> set of the alarm</li>
<li>the alarm <strong>MUST</strong> be returned as <code class="docutils literal"><span class="pre">new_value</span></code></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="task-restore">
<h3><a class="toc-backref" href="#id17">Task: Restore</a><a class="headerlink" href="#task-restore" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">alerts.useraction.uncancel(manager,</span> <span class="pre">alarm,</span> <span class="pre">author,</span> <span class="pre">message,</span> <span class="pre">event)</span> <span class="pre">-&gt;</span> <span class="pre">new_value,</span> <span class="pre">status</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">manager</span></code> as an <code class="docutils literal"><span class="pre">Alerts</span></code> configurable: the task caller</li>
<li><code class="docutils literal"><span class="pre">alarm</span></code> as described by the <a class="reference internal" href="#tr-alarm-datamodel"><span class="std std-ref">alarm data model</span></a>: the alarm to restore</li>
<li><code class="docutils literal"><span class="pre">author</span></code> as a <code class="docutils literal"><span class="pre">string</span></code>: the alarm restoring author</li>
<li><code class="docutils literal"><span class="pre">message</span></code> as a <code class="docutils literal"><span class="pre">string</span></code>: the alarm restoring message</li>
<li><code class="docutils literal"><span class="pre">event</span></code> as a <code class="docutils literal"><span class="pre">dict</span></code>: the <a class="reference internal" href="../FR/fr__event.html#fr-event-uncancel"><span class="std std-ref">alarm restoring event</span></a></li>
<li><code class="docutils literal"><span class="pre">new_value</span></code> as described by the <a class="reference internal" href="#tr-alarm-datamodel"><span class="std std-ref">alarm data model</span></a>: the new alarm value</li>
<li><code class="docutils literal"><span class="pre">status</span></code> as an <code class="docutils literal"><span class="pre">int</span></code> which will be set to the previous status or the actual status as it should have been without the <em>cancel</em> (will trigger a change of status on the alarm)</li>
</ul>
</div></blockquote>
<p><strong>Expected:</strong></p>
<blockquote>
<div><ul class="simple">
<li>the alarm <code class="docutils literal"><span class="pre">cancel</span></code> <strong>MUST</strong> be set to <code class="docutils literal"><span class="pre">None</span></code></li>
<li>the <a class="reference internal" href="#tr-alarm-datamodel-cancel"><span class="std std-ref">cancel step</span></a> <strong>MUST</strong> be added to the <code class="docutils literal"><span class="pre">steps</span></code> set of the alarm</li>
<li>the alarm <strong>MUST</strong> be returned as <code class="docutils literal"><span class="pre">new_value</span></code></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="task-declare-ticket">
<h3><a class="toc-backref" href="#id18">Task: Declare ticket</a><a class="headerlink" href="#task-declare-ticket" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">alerts.useraction.declareticket(manager,</span> <span class="pre">alarm,</span> <span class="pre">author,</span> <span class="pre">message,</span> <span class="pre">event)</span> <span class="pre">-&gt;</span> <span class="pre">new_value</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">manager</span></code> as an <code class="docutils literal"><span class="pre">Alerts</span></code> configurable: the task caller</li>
<li><code class="docutils literal"><span class="pre">alarm</span></code> as described by the <a class="reference internal" href="#tr-alarm-datamodel"><span class="std std-ref">alarm data model</span></a>: the alarm used for ticket declaration</li>
<li><code class="docutils literal"><span class="pre">author</span></code> as a <code class="docutils literal"><span class="pre">string</span></code>: the ticket declaration author</li>
<li><code class="docutils literal"><span class="pre">message</span></code> as a <code class="docutils literal"><span class="pre">string</span></code>: the ticket declaration message</li>
<li><code class="docutils literal"><span class="pre">event</span></code> as a <code class="docutils literal"><span class="pre">dict</span></code>: the <a class="reference internal" href="../FR/fr__event.html#fr-event-declareticket"><span class="std std-ref">ticket declaration event</span></a></li>
<li><code class="docutils literal"><span class="pre">new_value</span></code> as described by the <a class="reference internal" href="#tr-alarm-datamodel"><span class="std std-ref">alarm data model</span></a>: the new alarm value</li>
</ul>
</div></blockquote>
<p><strong>Expected:</strong></p>
<blockquote>
<div><ul class="simple">
<li>the alarm <code class="docutils literal"><span class="pre">ticket</span></code> <strong>MUST</strong> be set to the <a class="reference internal" href="#tr-alarm-datamodel-declareticket"><span class="std std-ref">ticket declaration step</span></a></li>
<li>the step <strong>MUST</strong> be added to the <code class="docutils literal"><span class="pre">steps</span></code> set of the alarm</li>
<li>the alarm <strong>MUST</strong> be returned as <code class="docutils literal"><span class="pre">new_value</span></code></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="task-associate-ticket">
<h3><a class="toc-backref" href="#id19">Task: Associate ticket</a><a class="headerlink" href="#task-associate-ticket" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">alerts.useraction.assocticket(manager,</span> <span class="pre">alarm,</span> <span class="pre">author,</span> <span class="pre">message,</span> <span class="pre">event)</span> <span class="pre">-&gt;</span> <span class="pre">new_value</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">manager</span></code> as an <code class="docutils literal"><span class="pre">Alerts</span></code> configurable: the task caller</li>
<li><code class="docutils literal"><span class="pre">alarm</span></code> as described by the <a class="reference internal" href="#tr-alarm-datamodel"><span class="std std-ref">alarm data model</span></a>: the alarm used for ticket association</li>
<li><code class="docutils literal"><span class="pre">author</span></code> as a <code class="docutils literal"><span class="pre">string</span></code>: the ticket association author</li>
<li><code class="docutils literal"><span class="pre">message</span></code> as a <code class="docutils literal"><span class="pre">string</span></code>: the ticket association message</li>
<li><code class="docutils literal"><span class="pre">event</span></code> as a <code class="docutils literal"><span class="pre">dict</span></code>: the <a class="reference internal" href="../FR/fr__event.html#fr-event-assocticket"><span class="std std-ref">ticket association event</span></a></li>
<li><code class="docutils literal"><span class="pre">new_value</span></code> as described by the <a class="reference internal" href="#tr-alarm-datamodel"><span class="std std-ref">alarm data model</span></a>: the new alarm value</li>
</ul>
</div></blockquote>
<p><strong>Expected:</strong></p>
<blockquote>
<div><ul class="simple">
<li>the alarm <code class="docutils literal"><span class="pre">ticket</span></code> <strong>MUST</strong> be set to the <a class="reference internal" href="#tr-alarm-datamodel-assocticket"><span class="std std-ref">ticket association step</span></a></li>
<li>the step <strong>MUST</strong> be added to the <code class="docutils literal"><span class="pre">steps</span></code> set of the alarm</li>
<li>the alarm <strong>MUST</strong> be returned as <code class="docutils literal"><span class="pre">new_value</span></code></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="task-change-state">
<h3><a class="toc-backref" href="#id20">Task: Change State</a><a class="headerlink" href="#task-change-state" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">alerts.useraction.changestate(manager,</span> <span class="pre">alarm,</span> <span class="pre">author,</span> <span class="pre">message,</span> <span class="pre">event)</span> <span class="pre">-&gt;</span> <span class="pre">new_value</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">manager</span></code> as an <code class="docutils literal"><span class="pre">Alerts</span></code> configurable: the task caller</li>
<li><code class="docutils literal"><span class="pre">alarm</span></code> as described by the <a class="reference internal" href="#tr-alarm-datamodel"><span class="std std-ref">alarm data model</span></a>: the alarm to change</li>
<li><code class="docutils literal"><span class="pre">author</span></code> as a <code class="docutils literal"><span class="pre">string</span></code>: the change state author</li>
<li><code class="docutils literal"><span class="pre">message</span></code> as a <code class="docutils literal"><span class="pre">string</span></code>: the change state message</li>
<li><code class="docutils literal"><span class="pre">event</span></code> as a <code class="docutils literal"><span class="pre">dict</span></code>: the <a class="reference internal" href="../FR/fr__event.html#fr-event-changestate"><span class="std std-ref">change state event</span></a></li>
<li><code class="docutils literal"><span class="pre">new_value</span></code> as described by the <a class="reference internal" href="#tr-alarm-datamodel"><span class="std std-ref">alarm data model</span></a>: the new alarm value</li>
</ul>
</div></blockquote>
<p><strong>Expected:</strong></p>
<blockquote>
<div><ul class="simple">
<li>the alarm <code class="docutils literal"><span class="pre">ticket</span></code> <strong>MUST</strong> be set to the <a class="reference internal" href="#tr-alarm-datamodel-changestate"><span class="std std-ref">change state step</span></a></li>
<li>the step <strong>MUST</strong> be added to the <code class="docutils literal"><span class="pre">steps</span></code> set of the alarm</li>
<li>the alarm <strong>MUST</strong> be returned as <code class="docutils literal"><span class="pre">new_value</span></code></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="task-state-increase">
<h3><a class="toc-backref" href="#id21">Task: State increase</a><a class="headerlink" href="#task-state-increase" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">alerts.systemaction.state_increase(manager,</span> <span class="pre">alarm,</span> <span class="pre">state,</span> <span class="pre">event)</span> <span class="pre">-&gt;</span> <span class="pre">new_value,</span> <span class="pre">status</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li><cite>manager`</cite> as an <code class="docutils literal"><span class="pre">Alerts</span></code> configurable: the task caller</li>
<li><code class="docutils literal"><span class="pre">alarm</span></code> as described by the <a class="reference internal" href="#tr-alarm-datamodel"><span class="std std-ref">alarm data model</span></a>: the alarm to change</li>
<li><code class="docutils literal"><span class="pre">state</span></code> as <code class="docutils literal"><span class="pre">int</span></code>: the increased state</li>
<li><code class="docutils literal"><span class="pre">event</span></code> as a <code class="docutils literal"><span class="pre">dict</span></code>: the <a class="reference internal" href="../FR/fr__event.html#fr-event-check"><span class="std std-ref">check event</span></a></li>
<li><code class="docutils literal"><span class="pre">new_value</span></code> as described by the <a class="reference internal" href="#tr-alarm-datamodel"><span class="std std-ref">alarm data model</span></a>: the new alarm value</li>
<li><code class="docutils literal"><span class="pre">status</span></code> as <code class="docutils literal"><span class="pre">int</span></code>: the new computed status from state history</li>
</ul>
</div></blockquote>
<p><strong>Expected:</strong></p>
<blockquote>
<div><ul class="simple">
<li>the alarm <code class="docutils literal"><span class="pre">state</span></code> <strong>MUST</strong> be set to the <a class="reference internal" href="#tr-alarm-datamodel-stateinc"><span class="std std-ref">state increase step</span></a> <strong>only if</strong> there was no <a class="reference internal" href="#tr-alarm-datamodel-changestate"><span class="std std-ref">change state step</span></a> set</li>
<li>the step <strong>MUST</strong> be added to the <code class="docutils literal"><span class="pre">steps</span></code> set of the alarm</li>
<li>the alarm <code class="docutils literal"><span class="pre">status</span></code> <strong>MUST</strong> be computed accordingly to the functional tests</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="task-state-decrease">
<h3><a class="toc-backref" href="#id22">Task: State decrease</a><a class="headerlink" href="#task-state-decrease" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">alerts.systemaction.state_decrease(manager,</span> <span class="pre">alarm,</span> <span class="pre">state,</span> <span class="pre">event)</span> <span class="pre">-&gt;</span> <span class="pre">new_value,</span> <span class="pre">status</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li><cite>manager`</cite> as an <code class="docutils literal"><span class="pre">Alerts</span></code> configurable: the task caller</li>
<li><code class="docutils literal"><span class="pre">alarm</span></code> as described by the <a class="reference internal" href="#tr-alarm-datamodel"><span class="std std-ref">alarm data model</span></a>: the alarm to change</li>
<li><code class="docutils literal"><span class="pre">state</span></code> as <code class="docutils literal"><span class="pre">int</span></code>: the decreased state</li>
<li><code class="docutils literal"><span class="pre">event</span></code> as a <code class="docutils literal"><span class="pre">dict</span></code>: the <a class="reference internal" href="../FR/fr__event.html#fr-event-check"><span class="std std-ref">check event</span></a></li>
<li><code class="docutils literal"><span class="pre">new_value</span></code> as described by the <a class="reference internal" href="#tr-alarm-datamodel"><span class="std std-ref">alarm data model</span></a>: the new alarm value</li>
<li><code class="docutils literal"><span class="pre">status</span></code> as <code class="docutils literal"><span class="pre">int</span></code>: the new computed status from state history</li>
</ul>
</div></blockquote>
<p><strong>Expected:</strong></p>
<blockquote>
<div><ul class="simple">
<li>the alarm <code class="docutils literal"><span class="pre">state</span></code> <strong>MUST</strong> be set to the <a class="reference internal" href="#tr-alarm-datamodel-statedec"><span class="std std-ref">state decrease step</span></a> <strong>only if</strong> there was no <a class="reference internal" href="#tr-alarm-datamodel-changestate"><span class="std std-ref">change state step</span></a> set</li>
<li>the step <strong>MUST</strong> be added to the <code class="docutils literal"><span class="pre">steps</span></code> set of the alarm</li>
<li>the alarm <code class="docutils literal"><span class="pre">status</span></code> <strong>MUST</strong> be computed accordingly to the functional tests</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="task-status-increase">
<h3><a class="toc-backref" href="#id23">Task: Status increase</a><a class="headerlink" href="#task-status-increase" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">alerts.systemaction.status_increase(manager,</span> <span class="pre">alarm,</span> <span class="pre">status,</span> <span class="pre">event)</span> <span class="pre">-&gt;</span> <span class="pre">new_value</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li><cite>manager`</cite> as an <code class="docutils literal"><span class="pre">Alerts</span></code> configurable: the task caller</li>
<li><code class="docutils literal"><span class="pre">alarm</span></code> as described by the <a class="reference internal" href="#tr-alarm-datamodel"><span class="std std-ref">alarm data model</span></a>: the alarm to change</li>
<li><code class="docutils literal"><span class="pre">status</span></code> as <code class="docutils literal"><span class="pre">int</span></code>: the increased status</li>
<li><code class="docutils literal"><span class="pre">event</span></code> as a <code class="docutils literal"><span class="pre">dict</span></code>: the <a class="reference internal" href="../FR/fr__event.html#fr-event-check"><span class="std std-ref">check event</span></a></li>
<li><code class="docutils literal"><span class="pre">new_value</span></code> as described by the <a class="reference internal" href="#tr-alarm-datamodel"><span class="std std-ref">alarm data model</span></a>: the new alarm value</li>
</ul>
</div></blockquote>
<p><strong>Expected:</strong></p>
<blockquote>
<div><ul class="simple">
<li>the alarm <code class="docutils literal"><span class="pre">status</span></code> <strong>MUST</strong> be set to the <a class="reference internal" href="#tr-alarm-datamodel-statusinc"><span class="std std-ref">status increase step</span></a></li>
<li>the step <strong>MUST</strong> be added to the <code class="docutils literal"><span class="pre">steps</span></code> set of the alarm</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="task-status-deccrease">
<h3><a class="toc-backref" href="#id24">Task: Status deccrease</a><a class="headerlink" href="#task-status-deccrease" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">alerts.systemaction.status_decrease(manager,</span> <span class="pre">alarm,</span> <span class="pre">status,</span> <span class="pre">event)</span> <span class="pre">-&gt;</span> <span class="pre">new_value</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li><cite>manager`</cite> as an <code class="docutils literal"><span class="pre">Alerts</span></code> configurable: the task caller</li>
<li><code class="docutils literal"><span class="pre">alarm</span></code> as described by the <a class="reference internal" href="#tr-alarm-datamodel"><span class="std std-ref">alarm data model</span></a>: the alarm to change</li>
<li><code class="docutils literal"><span class="pre">status</span></code> as <code class="docutils literal"><span class="pre">int</span></code>: the decreased status</li>
<li><code class="docutils literal"><span class="pre">event</span></code> as a <code class="docutils literal"><span class="pre">dict</span></code>: the <a class="reference internal" href="../FR/fr__event.html#fr-event-check"><span class="std std-ref">check event</span></a></li>
<li><code class="docutils literal"><span class="pre">new_value</span></code> as described by the <a class="reference internal" href="#tr-alarm-datamodel"><span class="std std-ref">alarm data model</span></a>: the new alarm value</li>
</ul>
</div></blockquote>
<p><strong>Expected:</strong></p>
<blockquote>
<div><ul class="simple">
<li>the alarm <code class="docutils literal"><span class="pre">status</span></code> <strong>MUST</strong> be set to the <a class="reference internal" href="#tr-alarm-datamodel-statusinc"><span class="std std-ref">status increase step</span></a></li>
<li>the step <strong>MUST</strong> be added to the <code class="docutils literal"><span class="pre">steps</span></code> set of the alarm</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="utility-get-previous-step">
<h3><a class="toc-backref" href="#id25">Utility: Get previous step</a><a class="headerlink" href="#utility-get-previous-step" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">get_previous_step(alarm,</span> <span class="pre">steptypes,</span> <span class="pre">[ts])</span> <span class="pre">-&gt;</span> <span class="pre">step</span></code>:</p>
</div>
<div class="section" id="utility-get-last-state">
<h3><a class="toc-backref" href="#id26">Utility: Get last state</a><a class="headerlink" href="#utility-get-last-state" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">get_last_state(alarm,</span> <span class="pre">[ts])</span> <span class="pre">-&gt;</span> <span class="pre">state</span></code>:</p>
</div>
<div class="section" id="utility-get-last-status">
<h3><a class="toc-backref" href="#id27">Utility: Get last status</a><a class="headerlink" href="#utility-get-last-status" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">get_last_status(alarm,</span> <span class="pre">[ts])</span> <span class="pre">-&gt;</span> <span class="pre">status</span></code>:</p>
</div>
<div class="section" id="utility-is-flapping">
<h3><a class="toc-backref" href="#id28">Utility: Is flapping ?</a><a class="headerlink" href="#utility-is-flapping" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">is_flapping(manager,</span> <span class="pre">alarm)</span> <span class="pre">-&gt;</span> <span class="pre">result</span></code>:</p>
</div>
<div class="section" id="utility-is-stealthy">
<h3><a class="toc-backref" href="#id29">Utility: Is stealthy ?</a><a class="headerlink" href="#utility-is-stealthy" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">is_stealthy(manager,</span> <span class="pre">alarm)</span> <span class="pre">-&gt;</span> <span class="pre">result</span></code>:</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="tr__serie.html" class="btn btn-neutral float-right" title="Serie" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="tr__monitoring.html" class="btn btn-neutral" title="Monitoring" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Capensis.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>