

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Selector &mdash; Canopsis 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Canopsis 1.0 documentation" href="../../../../index.html"/>
        <link rel="up" title="Engines usage" href="index.html"/>
        <link rel="next" title="Datacleaner Engine" href="datacleaner.html"/>
        <link rel="prev" title="Linklist" href="linklist.html"/> 

  
  <script src="../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../index.html" class="icon icon-home"> Canopsis
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">Canopsis</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html">Sakura</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../overview/index.html">Overview</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">User guide</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../quickstart/index.html">Quickstart</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reminders/index.html">Reminders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../UI/index.html">User Interface</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="index.html">Engines usage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../administrator-guide/index.html">Administrator guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer-guide/index.html">Developer guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/index.html">API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../index.html#canopsis-specification">Canopsis Specification</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../canopsis-connectors/index.html">Canopsis Connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../canopsis-ui-bricks/index.html">Canopsis Ui Bricks</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../../index.html">Canopsis</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../../index.html">Canopsis</a> &raquo;</li>
      
          <li><a href="../../index.html">Sakura</a> &raquo;</li>
      
          <li><a href="../index.html">User guide</a> &raquo;</li>
      
          <li><a href="index.html">Engines usage</a> &raquo;</li>
      
    <li>Selector</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../_sources/canopsis/canopsis/user-guide/engines/selector.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="selector">
<span id="user-engines-selector"></span><h1>Selector<a class="headerlink" href="#selector" title="Permalink to this headline">¶</a></h1>
<p>This document describes how does the selectors work.</p>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>A selector is composed of:</p>
<blockquote>
<div><ul class="simple">
<li>an event filter (and/or specific events included/excluded)</li>
<li>one or more computations</li>
</ul>
</div></blockquote>
<p>When the engine executes the selector, it will fetch events from the database
according to the configured filter. Then, the computations will be applied to
the set of events, in order to produce a new <code class="docutils literal"><span class="pre">selector</span></code> event.</p>
<p>The available computations are:</p>
<blockquote>
<div><ul class="simple">
<li>worst-state : the new event will have the worst event state among the set</li>
<li>SLA : a new <code class="docutils literal"><span class="pre">sla</span></code> event will be produced with SLA as metrics</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="event-emitted">
<h2>Event Emitted<a class="headerlink" href="#event-emitted" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">selector</span></code> event is very similar to a <code class="docutils literal"><span class="pre">check</span></code> event:</p>
<blockquote>
<div><ul>
<li><p class="first">it owns a state, computed from the selector&#8217;s alerts</p>
</li>
<li><dl class="first docutils">
<dt>it owns some internal metrics:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">cps_sel_state_off</span></code>: number of alerts off</li>
<li><code class="docutils literal"><span class="pre">cps_sel_state_minor</span></code>: number of minor alerts</li>
<li><code class="docutils literal"><span class="pre">cps_sel_state_major</span></code>: number of major alerts</li>
<li><code class="docutils literal"><span class="pre">cps_sel_state_critical</span></code>: number of critical alerts</li>
<li><code class="docutils literal"><span class="pre">cps_sel_ack</span></code>: number of acknowledged alerts</li>
<li><code class="docutils literal"><span class="pre">cps_sel_total</span></code>: total number of alerts in the selector</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">it is associated to a component only (with the selector&#8217;s name)</p>
</li>
<li><p class="first">its output is the rendered selector&#8217;s template</p>
</li>
</ul>
</div></blockquote>
<p>Example:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;connector&quot;</span><span class="o">:</span> <span class="s2">&quot;canopsis&quot;</span><span class="p">,</span>
  <span class="s2">&quot;connector_name&quot;</span><span class="o">:</span> <span class="s2">&quot;engine&quot;</span><span class="p">,</span>
  <span class="s2">&quot;event_type&quot;</span><span class="o">:</span> <span class="s2">&quot;selector&quot;</span><span class="p">,</span>
  <span class="s2">&quot;source_type&quot;</span><span class="o">:</span> <span class="s2">&quot;component&quot;</span><span class="p">,</span>
  <span class="s2">&quot;component&quot;</span><span class="o">:</span> <span class="s2">&quot;My Awesome Selector&quot;</span><span class="p">,</span>
  <span class="s2">&quot;state&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="s2">&quot;output&quot;</span><span class="o">:</span> <span class="s2">&quot;My Selector&#39;s template&quot;</span><span class="p">,</span>
  <span class="s2">&quot;display_name&quot;</span><span class="o">:</span> <span class="s2">&quot;My Awesome Selector&quot;</span><span class="p">,</span>
  <span class="s2">&quot;perf_data_array&quot;</span><span class="o">:</span> <span class="p">[(...)]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">sla</span></code> event is also similar to a <code class="docutils literal"><span class="pre">check</span></code> event:</p>
<blockquote>
<div><ul>
<li><p class="first">it owns a state, computed from the SLA metrics</p>
</li>
<li><dl class="first docutils">
<dt>it owns some metrics:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">cps_pct_by_0</span></code>: percentage of the SLA period in &#8220;Off&#8221; state</li>
<li><code class="docutils literal"><span class="pre">cps_pct_by_1</span></code>: percentage of the SLA period in &#8220;Minor&#8221; state</li>
<li><code class="docutils literal"><span class="pre">cps_pct_by_2</span></code>: percentage of the SLA period in &#8220;Major&#8221; state</li>
<li><code class="docutils literal"><span class="pre">cps_pct_by_3</span></code>: percentage of the SLA period in &#8220;Critical&#8221; state</li>
<li><code class="docutils literal"><span class="pre">cps_avail</span></code>: selector&#8217;s availability</li>
<li><code class="docutils literal"><span class="pre">cps_avail_duration</span></code>: duration when the selector is available</li>
<li><code class="docutils literal"><span class="pre">cps_alerts_duration</span></code>: duration when the selector is in alerts</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">it is associated to a resource of the selector&#8217;s component</p>
</li>
<li><p class="first">its output is the rendered SLA&#8217;s template, configured in the selector</p>
</li>
</ul>
</div></blockquote>
<p>Example:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;connector&quot;</span><span class="o">:</span> <span class="s2">&quot;sla&quot;</span><span class="p">,</span>
  <span class="s2">&quot;connector_name&quot;</span><span class="o">:</span> <span class="s2">&quot;engine&quot;</span><span class="p">,</span>
  <span class="s2">&quot;event_type&quot;</span><span class="o">:</span> <span class="s2">&quot;sla&quot;</span><span class="p">,</span>
  <span class="s2">&quot;source_type&quot;</span><span class="o">:</span> <span class="s2">&quot;resource&quot;</span><span class="p">,</span>
  <span class="s2">&quot;component&quot;</span><span class="o">:</span> <span class="s2">&quot;My Awesome Selector&quot;</span><span class="p">,</span>
  <span class="s2">&quot;resource&quot;</span><span class="o">:</span> <span class="s2">&quot;sla&quot;</span><span class="p">,</span>
  <span class="s2">&quot;state&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="s2">&quot;output&quot;</span><span class="o">:</span> <span class="s2">&quot;My SLA&#39;s template&quot;</span><span class="p">,</span>
  <span class="s2">&quot;display_name&quot;</span><span class="o">:</span> <span class="s2">&quot;My Awesome Selector&quot;</span><span class="p">,</span>
  <span class="s2">&quot;perf_data_array&quot;</span><span class="o">:</span> <span class="p">[(...)]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="../../developer-guide/specifications/sla.html#dev-spec-sla"><span class="std std-ref">Service-Level Agreement</span></a> for more informations.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="datacleaner.html" class="btn btn-neutral float-right" title="Datacleaner Engine" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="linklist.html" class="btn btn-neutral" title="Linklist" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Capensis.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>