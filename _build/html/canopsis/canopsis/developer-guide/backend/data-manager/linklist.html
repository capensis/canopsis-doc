

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Link list system &mdash; Canopsis 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Canopsis 1.0 documentation" href="../../../../../index.html"/>
        <link rel="up" title="Data Manager" href="index.html"/>
        <link rel="next" title="vEvent management" href="vevent.html"/>
        <link rel="prev" title="Topology: library for managing topologies" href="topology.html"/> 

  
  <script src="../../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../../index.html" class="icon icon-home"> Canopsis
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../../index.html">Canopsis</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../../index.html">Sakura</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../../overview/index.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user-guide/index.html">User guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../administrator-guide/index.html">Administrator guide</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../index.html">Developer guide</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../../best-practices/index.html">Best Practices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../specifications/index.html">Specifications</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="../index.html">Backend</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../frontend/index.html">Frontend</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/index.html">API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../index.html#canopsis-specification">Canopsis Specification</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../canopsis-connectors/index.html">Canopsis Connectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../canopsis-ui-bricks/index.html">Canopsis Ui Bricks</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../../../index.html">Canopsis</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../../../index.html">Canopsis</a> &raquo;</li>
      
          <li><a href="../../../index.html">Sakura</a> &raquo;</li>
      
          <li><a href="../../index.html">Developer guide</a> &raquo;</li>
      
          <li><a href="../index.html">Backend</a> &raquo;</li>
      
          <li><a href="index.html">Data Manager</a> &raquo;</li>
      
    <li>Link list system</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../../_sources/canopsis/canopsis/developer-guide/backend/data-manager/linklist.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="link-list-system">
<span id="dev-backend-mgr-linklist"></span><h1>Link list system<a class="headerlink" href="#link-list-system" title="Permalink to this headline">¶</a></h1>
<p>You should first have a look at: <a class="reference external" href="../../../user-guide/engines/linklist.html">How to use link list system</a></p>
<p>Then you learned that link information may come from user association and event specific keys.</p>
<div class="section" id="architecture">
<h2>Architecture<a class="headerlink" href="#architecture" title="Permalink to this headline">¶</a></h2>
<p>Link list system is made of two managers:</p>
<blockquote>
<div><ul class="simple">
<li><strong>Linklist</strong> manager&#8217;s goal is to persist user <code class="docutils literal"><span class="pre">mfilter</span> <span class="pre">/</span> <span class="pre">link</span> <span class="pre">list</span></code> information, with in mind that a link list is a list of dictionary with a label and an url value. That&#8217;s as simple.</li>
<li><strong>Entitylink</strong> manager&#8217;s goal is to store current link association for each matched entity.</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Database configuration for these manager are written to the <strong>linklist/linklist.conf</strong> file.</p>
</div>
<p>Thus, a link list database document have an <strong>arbitrary id</strong>, a <strong>mfilter</strong> and a <strong>link list</strong> information and should looks like:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;_id&quot;</span> <span class="o">:</span> <span class="s2">&quot;d4be3c5c-65cc-417c-bbf3-4283539122ab&quot;</span><span class="p">,</span>
   <span class="s2">&quot;filterlink&quot;</span> <span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span>
         <span class="s2">&quot;url&quot;</span> <span class="o">:</span> <span class="s2">&quot;http://canopsis.org&quot;</span><span class="p">,</span>
         <span class="s2">&quot;label&quot;</span> <span class="o">:</span> <span class="s2">&quot;canopsis&quot;</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">&quot;crecord_type&quot;</span> <span class="o">:</span> <span class="s2">&quot;linklist&quot;</span><span class="p">,</span>
   <span class="s2">&quot;mfilter&quot;</span> <span class="o">:</span> <span class="s2">&quot;{\&quot;$or\&quot;:[{\&quot;component\&quot;:{\&quot;$eq\&quot;:\&quot;mycomponent\&quot;}}]}&quot;</span><span class="p">,</span>
   <span class="s2">&quot;name&quot;</span> <span class="o">:</span> <span class="s2">&quot;my link list&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This document configuration is generated from the UI and managed by the API python service witch calls the manager methods.
This particular configuration will lead to generate the following entity link information once a scheduled job is processed:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;_id&quot;</span> <span class="o">:</span> <span class="s2">&quot;/resource/myconnector/myconnector_name/mycomponent/myresource&quot;</span><span class="p">,</span>
   <span class="s2">&quot;event_links&quot;</span> <span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span>
         <span class="s2">&quot;url&quot;</span> <span class="o">:</span> <span class="s2">&quot;http://perdu.com&quot;</span><span class="p">,</span>
         <span class="s2">&quot;label&quot;</span> <span class="o">:</span> <span class="s2">&quot;action_url&quot;</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">&quot;computed_links&quot;</span> <span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span>
         <span class="s2">&quot;url&quot;</span> <span class="o">:</span> <span class="s2">&quot;http://canopsis.org&quot;</span><span class="p">,</span>
         <span class="s2">&quot;label&quot;</span> <span class="o">:</span> <span class="s2">&quot;canopsis&quot;</span>
      <span class="p">}</span>
   <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In this document, the <code class="docutils literal"><span class="pre">event_links</span></code> list is computed by the <a class="reference external" href="engines/scheduler.html">scheduled jobs</a> code, whereas, the <code class="docutils literal"><span class="pre">computed_links</span></code> list is computed by the linklist engines that watch for events key(label)/value(url) described by the <strong>link_field</strong> list property of the engine.</p>
<p>for exemple, when in the engine, <strong>link_field</strong> equals [&#8216;action_url&#8217;], for each event passing through the work method, <code class="docutils literal"><span class="pre">if</span> <span class="pre">'action_url'</span> <span class="pre">in</span> <span class="pre">event</span> <span class="pre">and</span> <span class="pre">event['action_url']</span></code> then information is persisted/overriden by then entity link manager.</p>
<p>When entity link information are filled enough, in the UI, labelled link list are available in the event list widget/view (as shown in the user guide).</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="vevent.html" class="btn btn-neutral float-right" title="vEvent management" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="topology.html" class="btn btn-neutral" title="Topology: library for managing topologies" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Capensis.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>